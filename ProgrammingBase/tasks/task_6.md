# Самостоятельная работа 6 - Автобатлер (дедлайн 06.12.25 включительно, до 20 баллов)


# **Техническое задание (ТЗ)**

## Проект: CLI-автобаттлер «Команда героев против монстров»

### **1. Цель проекта**

Разработать консольную игру-автобаттлер, в которой пользователь собирает команду героев, настраивает их параметры (опционально) и сражается с командой монстров. Бой проходит автоматически по заданным правилам. Игра работает без ООП, исключительно на функциях, и состоит из 2–3 модулей.

---

# **2. Функциональные требования**

## 2.1. Основной игровой процесс

1. У пользователя есть набор героев.

2. Противником выступает набор монстров.

3. Пользователь выбирает 3–5 героев для своей команды.

4. Пользователь выбирает стратегию атаки для своей команды.

5. Монстры используют простую стратегию (например, `focus`).

6. Запускается автоматический бой, который:

   * проходит по раундам,
   * внутри раунда ходы идут в порядке убывания `spd` (скорости),
   * каждый персонаж наносит урон `atk` выбранной цели по стратегии,
   * персонаж с `hp <= 0` выбывает,
   * бой заканчивается, когда вся команда одной из сторон побеждена.

7. По завершении боя выводится лог:

   * события по ходам и раундам,
   * итоговый победитель.

---

## 2.2. Формат данных персонажей

Каждый персонаж — словарь Python вида:

```python
{
    "name": "string",
    "hp": int,
    "atk": int,
    "spd": int,
    "team": "heroes" | "monsters"
}
```

Все поля обязательны.

---

## 2.3. Встроенные данные

В проекте должны быть **встроенные (дефолтные)** списки героев и монстров (например, 3–6 персонажей каждого типа).
Они используются, если пользователь не загрузил данные из файлов.

---

## 2.4. Поддержка загрузки персонажей из файлов

Игра должна поддерживать загрузку героев и монстров из JSON-файлов.

### Требования:

1. Формат файла — список словарей, таких же, как в модели персонажа (без поля `team`, оно проставляется автоматически).
2. Для загрузки используется аргументы CLI:

```
--heroes-file heroes.json
--monsters-file monsters.json
```

3. Если файл не указан — используются встроенные данные.
4. Если файл указан, но недоступен, некорректен или содержит неверную структуру:

   * игра должна вывести понятное сообщение об ошибке;
   * завершить работу или откатиться на дефолтные данные — на выбор разработчика (вариант нужно указать в документации).

---

## 2.5. Настройка персонажей перед боем

Пользователь может изменить параметры выбранных персонажей через CLI-диалог.

### Возможности:

* Изменить `hp`, `atk`, `spd`.
* Изменить `name` (опционально).
* Оставить любое значение по умолчанию, нажав Enter.
* Настройка включается флагами:

```
--tune-heroes
--tune-monsters
```

---

## 2.6. Стратегии боя

Минимальный набор стратегий выбора цели:

1. `focus` — атаковать первого живого врага.
2. `weakest` — атаковать врага с наименьшим HP.
3. `random` — случайный выбор цели.

Пользователь выбирает стратегию своей команды через CLI (ввод вручную).

Стратегия монстров может быть фиксированной (`focus`).

---

# **3. Нефункциональные требования**

## 3.1. Стиль реализации

* Только **функции**, без классов и ООП.
* Организация проекта:

  * 2–3 модуля, например:

    * `data_io.py` — загрузка данных, дефолтные списки, валидация.
    * `battle.py` — логика боя.
    * `cli.py` / `main.py` — CLI-интерфейс.
* Код должен быть аккуратно структурирован, функции — чистыми, логически разделёнными.

---

## 3.2. CLI

* Использовать стандартный `argparse` (опционально).
* Все пользовательские действия происходят в консоли.
* Лог боя должен выводиться построчно, в удобочитаемом виде.

---

## 3.3. Обработка ошибок

* Некорректные файлы JSON → понятное сообщение.
* Недоступные файлы → понятное сообщение.
* Неверные параметры персонажей → отклонить и запросить повторный ввод.

---

# **4. Основные функции ядра игры (минимум)**

### В модуле `data_io.py`:

* `load_characters_from_file(path, team)`
* `get_default_heroes()`
* `get_default_monsters()`
* `validate_character_dict(d)`
* `prepare_heroes(path_or_none)`
* `prepare_monsters(path_or_none)`

### В модуле `battle.py`:

* `choose_target(enemies, strategy)`
* `take_turn(attacker, enemies, strategy)`
* `execute_round(heroes, monsters, s_heroes, s_monsters)`
* `simulate_battle(heroes, monsters, s_heroes, s_monsters)`

  * возвращает `(winner_team, battle_log)`

### В модуле `cli.py` (или `main.py`):

* `parse_args()`
* `select_heroes(...)`
* `tune_character_interactively(char)`
* `run_game()`

---

# **5. Критерии готовности проекта**

1. Игра запускается из терминала командой:

   ```
   python main.py [опции]
   ```
2. Можно:

   * выбрать героев,
   * выбрать стратегию,
   * настроить параметры,
   * загрузить данные из файлов.
3. Бой проходит корректно, лог воспроизводится текстом.
4. Победитель определяется корректно.
5. Структура проекта соответствует требованию: 2–3 модуля, функции, CLI.


# **Критерии оценки проекта (макс. 20 баллов)**

## **1. Функциональная полнота — 6 баллов**

Оценивается реализация требований ТЗ.

* Реализован выбор команды героев (3–5) — **1 балл**
* Реализована автоматическая симуляция боя по правилам (SPD → ход, урон, смерть) — **2 балла**
* Реализованы стратегии (`focus`, `weakest`, `random`) — **1 балл**
* Поддержка загрузки персонажей из JSON-файлов — **1 балл**
* Поддержка настройки персонажей через CLI (изменение hp/atk/spd) — **1 балл**

---

## **2. Архитектура и структура кода — 4 балла**

Оценивается соблюдение ограничений и хорошая организация.

* 2–3 модуля, корректное разбиение на `data_io`, `battle`, `cli` — **1 балл**
* Полное отсутствие ООП (только функции) — **1 балл**
* Изоляция логики: модули не перемешивают ответственность — **1 балл**
* Чистота функций: отсутствие глобального состояния, минимум побочных эффектов — **1 балл**

---

## **3. CLI и удобство использования — 3 балла**

Оценивается интерфейс взаимодействия.

* Корректная обработка аргументов — **1 балл**
* Понятный и последовательный диалог выбора и настройки персонажей — **1 балл**
* Лог боя: формат, читаемость, последовательность событий — **1 балл**

---

## **4. Обработка ошибок и валидация — 2 балла**

Оценивается устойчивость программы к некорректным данным.

* Проверка корректности JSON-файлов, вывод понятных ошибок — **1 балл**
* Валидация параметров персонажей при настройке (типы, диапазоны) — **1 балл**

---

## **5. Субъективная оценка преподавателя — 5 баллов**

Сюда входит:

* Общее впечатление от работы
* Ясность, аккуратность и читаемость кода
* Качество логики боя и игровой динамики
* Креативность (доп. стратегии, эффекты, UI)
* Выполнение сверх минимума

---

# **Итого**

**Максимум: 20 баллов**

* **15 баллов** — объективные технические критерии
* **5 баллов** — субъективная оценка преподавателя

❗❗❗❗❗❗❗❗❗❗❗❗❗❗❗❗❗❗❗❗❗❗❗❗

# ⚠ Штрафы

Работу нужно будет защитить с объяснением всего кода. Вы должны доказать, что код написан вами и вы в нем разбираетесь. Если данное условие не выполнено, баллы за задание **не выставляются**.

❗❗❗❗❗❗❗❗❗❗❗❗❗❗❗❗❗❗❗❗❗❗❗❗

---
